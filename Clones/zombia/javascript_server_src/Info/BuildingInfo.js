const buildingInfo =
{
    "Wall": {
        "name": "Wall",
        "class": "Wall",
        "woodCosts": [1, 2, 4, 6, 8, 12, 15, 20],
        "stoneCosts": [1, 2, 4, 6, 8, 12, 15, 20],
        "goldCosts": [0, 5, 30, 60, 80, 200, 500, 1000],
        "tokensCosts": [0, 0, 0, 0, 0, 0, 0, 0],
        "width": 47.99,
        "gridWidth": 1,
        "height": 47.99,
        "gridHeight": 1,
        "health": [400, 500, 600, 800, 1000, 1800, 3000, 5500],
        "msBeforeRegen": [10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000],
        "healthRegenPerSecond": [20, 25, 30, 50, 75, 140, 180, 250],
        "limitStatic": false,
        "limitPerMember": 250,
        "hotkey": 1,
        "description": "Use these walls to defend your base!",
        "tiers": 8,
        "gameModes": ["standard", "scarcity"]
    },
    "LargeWall": {
        "name": "LargeWall",
        "class": "Wall",
        "woodCosts": [3, 6, 12, 18, 24, 36, 45, 60],
        "stoneCosts": [3, 6, 12, 18, 24, 36, 45, 60],
        "goldCosts": [0, 15, 90, 180, 240, 600, 1500, 3000],
        "tokensCosts": [0, 0, 0, 0, 0, 0, 0, 0],
        "width": 95.99,
        "gridWidth": 2,
        "height": 95.99,
        "gridHeight": 2,
        "health": [1700, 2125, 2550, 3400, 4250, 7650, 12750, 23375],
        "msBeforeRegen": [10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000],
        "healthRegenPerSecond": [20, 25, 30, 50, 75, 140, 180, 250],
        "limitStatic": false,
        "limitPerMember": 20,
        "description": "Use these walls to defend your base!",
        "tiers": 8,
        "gameModes": ["standard", "scarcity"]
    },
    "Door": {
        "name": "Door",
        "class": "Wall",
        "woodCosts": [5, 5, 0, 0, 0, 0, 0, 0],
        "stoneCosts": [5, 5, 0, 0, 0, 0, 0, 0],
        "goldCosts": [0, 10, 50, 70, 150, 200, 400, 800],
        "tokensCosts": [0, 0, 0, 0, 0, 0, 0, 0],
        "width": 47.99,
        "gridWidth": 1,
        "height": 47.99,
        "gridHeight": 1,
        "health": [150, 200, 300, 500, 600, 700, 1000, 1500],
        "msBeforeRegen": [10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000],
        "healthRegenPerSecond": [5, 7, 12, 17, 25, 40, 70, 100],
        "limitStatic": false,
        "limitPerMember": 80,
        "hotkey": 2,
        "description": "These doors can be passed through by your teammates but no one else.",
        "tiers": 8,
        "gameModes": ["standard", "scarcity"]
    },
    "SpikeTrap": {
        "name": "SpikeTrap",
        "class": "Wall",
        "goldCosts": [0, 100, 200, 400, 600, 800, 1000, 1500],
        "woodCosts": [5, 25, 30, 40, 50, 70, 300, 800],
        "stoneCosts": [5, 20, 30, 40, 60, 80, 300, 800],
        "tokensCosts": [0, 0, 0, 0, 0, 0, 0, 0],
        "height": 47.99,
        "gridHeight": 1,
        "width": 47.99,
        "gridWidth": 1,
        "damageToZombies": [1, 2, 4, 6, 8, 12, 16, 28],
        "limitStatic": false,
        "limitPerMember": 12,
        "description": "These invincible tiles will spike zombies when they walk over them.",
        "tiers": 8,
        "gameModes": ["standard", "scarcity"]
    },
    "LightningTower": {
        "name": "LightningTower",
        "class": "LightningTower",
        "woodCosts": [15, 25, 40, 50, 70, 100, 300, 800],
        "stoneCosts": [15, 25, 40, 50, 70, 100, 300, 800],
        "goldCosts": [0, 100, 200, 600, 1200, 2000, 8000, 35000],
        "tokensCosts": [0, 0, 0, 0, 0, 0, 0, 0],
        "towerRadius": [600, 600, 600, 600, 600, 600, 600, 600],
        "msBetweenFires": [500, 500, 400, 400, 350, 300, 300, 50],
        "height": 95.99,
        "gridHeight": 2,
        "width": 95.99,
        "gridWidth": 2,
        "health": [150, 200, 400, 800, 1200, 1600, 2200, 3600],
        "msBeforeRegen": [10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000],
        "healthRegenPerSecond": [20, 25, 30, 40, 80, 80, 110, 150],
        "damageToZombies": [40, 40, 50, 60, 80, 120, 150, 240],
        "damageToPlayers": [2, 2, 2, 2, 2, 3, 3, 4],
        "damageToPets": [5, 5, 5, 5, 5, 5, 5, 5],
        "damageToNeutrals": [250, 350, 450, 550, 650, 750, 850, 1000],
        "attackTargetLimit": [2, 3, 3, 4, 4, 6, 8, 10],
        "maximumBeamBridgingDistance": 192,
        "limitStatic": false,
        "limitPerMember": 6,
        "hotkey": 3,
        "description": "Shoots beams of electricity which arc between enemies.",
        "tiers": 8,
        "gameModes": ["standard", "scarcity"]
    },
    "ArrowTower": {
        "name": "ArrowTower",
        "class": "ArrowTower",
        "goldCosts": [0, 100, 200, 600, 1200, 2000, 8000, 35000],
        "woodCosts": [5, 25, 30, 40, 50, 70, 300, 800],
        "stoneCosts": [5, 20, 30, 40, 60, 80, 300, 800],
        "tokensCosts": [0, 0, 0, 0, 0, 0, 0, 0],
        "towerRadius": [600, 650, 700, 750, 800, 850, 900, 950],
        "msBetweenFires": [400, 333, 285, 250, 250, 250, 200, 150],
        "height": 95.99,
        "gridHeight": 2,
        "width": 95.99,
        "gridWidth": 2,
        "health": [150, 200, 400, 800, 1200, 1600, 2200, 3600],
        "msBeforeRegen": [10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000],
        "healthRegenPerSecond": [20, 25, 30, 40, 80, 80, 110, 150],
        "damageToZombies": [20, 30, 50, 80, 120, 150, 250, 500],
        "damageToPlayers": [2, 2, 2, 3, 3, 4, 4, 4],
        "damageToPets": [5, 5, 5, 5, 5, 5, 6, 6],
        "damageToNeutrals": [250, 350, 450, 550, 650, 750, 850, 1000],
        "projectileLifetime": [1300, 1300, 1300, 1300, 1300, 1300, 1300, 1300],
        "projectileSpeed": [42, 58, 64, 64, 72, 72, 86, 100],
        "projectileName": "ArrowProjectile",
        "projectileAoe": [false, false, false, false, false, false, false, false],
        "projectileCollisionRadius": [10, 10, 10, 10, 10, 10, 10, 10],
        "projectileEntityKnockback": [2, 2, 3, 3, 3, 3, 3, 3],
        "projectileAbleToHome": false,
        "limitStatic": false,
        "limitPerMember": 6,
        "hotkey": 4,
        "description": "Shoots fast, hits hard, and cheap!",
        "tiers": 8,
        "gameModes": ["standard", "scarcity"]
    },
    "CannonTower": {
        "name": "CannonTower",
        "class": "Tower",
        "woodCosts": [15, 25, 30, 40, 60, 80, 300, 800],
        "stoneCosts": [15, 25, 40, 50, 80, 120, 300, 800],
        "goldCosts": [0, 100, 200, 600, 1200, 2000, 8000, 35000],
        "tokensCosts": [0, 0, 0, 0, 0, 0, 0, 0],
        "towerRadius": [500, 500, 500, 500, 600, 600, 600, 600],
        "msBetweenFires": [1000, 950, 950, 800, 700, 600, 500, 400],
        "height": 95.99,
        "gridHeight": 2,
        "width": 95.99,
        "gridWidth": 2,
        "health": [150, 200, 400, 800, 1200, 1600, 2200, 3600],
        "msBeforeRegen": [10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000],
        "healthRegenPerSecond": [20, 25, 30, 40, 80, 80, 110, 150],
        "damageToZombies": [20, 30, 50, 70, 120, 150, 200, 300],
        "damageToPlayers": [3, 3, 4, 4, 5, 5, 5, 6],
        "damageToPets": [5, 5, 5, 5, 5, 5, 6, 8],
        "damageToNeutrals": [250, 350, 450, 550, 650, 750, 850, 1000],
        "projectileLifetime": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000],
        "projectileSpeed": [42, 42, 42, 50, 58, 72, 72, 86],
        "projectileName": "CannonProjectile",
        "projectileAoe": [true, true, true, true, true, true, true, true],
        "projectileCollisionRadius": [10, 10, 10, 10, 10, 10, 10, 10],
        "projectileEntityKnockback": [4, 4, 4, 4, 4, 4, 4, 4],
        "projectileKnockbackRadius": [48, 48, 48, 48, 48, 48, 72, 96],
        "projectileAbleToHome": [false, false, false, false, false, false, false, false],
        "limitStatic": false,
        "limitPerMember": 6,
        "hotkey": 5,
        "description": "Cannon balls for big knockback!",
        "tiers": 8,
        "gameModes": ["standard", "scarcity"]
    },
    "SawTower": {
        "name": "SawTower",
        "class": "SawTower",
        "woodCosts": [10, 25, 30, 40, 50, 70, 300, 800],
        "stoneCosts": [10, 20, 30, 40, 60, 80, 300, 800],
        "goldCosts": [0, 100, 200, 600, 1200, 2000, 8000, 35000],
        "tokensCosts": [0, 0, 0, 0, 0, 0, 0, 0],
        "msBetweenFires": 0,
        "height": 95.99,
        "gridHeight": 2,
        "width": 95.99,
        "gridWidth": 2,
        "health": [200, 400, 800, 1200, 1600, 2200, 4000, 9000],
        "msBeforeRegen": [10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000],
        "healthRegenPerSecond": [20, 25, 30, 40, 80, 80, 110, 150],
        "damageToZombies": [120, 150, 200, 500, 700, 1400, 3500, 5000],
        "damageToPlayers": [40, 50, 50, 60, 70, 70, 80, 110],
        "damageToPets": [5, 5, 5, 5, 5, 5, 6, 6],
        "damageToNeutrals": [250, 350, 450, 550, 650, 750, 850, 1000],
        "maxYawDeviation": [45, 45, 45, 45, 45, 45, 45, 45],
        "range": [144, 144, 144, 144, 144, 144, 144, 144],
        "limitStatic": false,
        "limitPerMember": 6,
        "hotkey": 6,
        "description": "These bad boys will cut through anything that gets too close.",
        "tiers": 8,
        "gameModes": ["standard", "scarcity"]
    },
    "RocketTower": {
        "name": "RocketTower",
        "class": "Tower",
        "woodCosts": [10, 25, 40, 50, 80, 120, 300, 800],
        "stoneCosts": [10, 25, 40, 50, 80, 120, 300, 800],
        "goldCosts": [0, 100, 200, 600, 1200, 2000, 8000, 35000],
        "tokensCosts": [0, 0, 0, 0, 0, 0, 0, 0],
        "towerRadius": [600, 625, 675, 700, 750, 800, 800, 1000],
        "msBetweenFires": [1000, 1000, 1000, 800, 800, 750, 750, 700],
        "height": 95.99,
        "gridHeight": 2,
        "width": 95.99,
        "gridWidth": 2,
        "health": [150, 200, 400, 800, 1200, 1600, 2200, 3600],
        "msBeforeRegen": [10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000],
        "healthRegenPerSecond": [20, 25, 30, 40, 80, 80, 110, 150],
        "damageToZombies": [50, 50, 70, 80, 100, 240, 400, 750],
        "damageToPlayers": [3, 4, 4, 4, 5, 5, 6, 6],
        "damageToPets": [10, 10, 10, 10, 10, 10, 10, 10],
        "damageToNeutrals": [250, 350, 450, 550, 650, 750, 850, 1000],
        "projectileLifetime": [2000, 2000, 2000, 1000, 1000, 1000, 1000, 1000],
        "projectileLowSpeed": [4, 4, 4, 5, 5, 6, 6, 8],
        "projectileMaxSpeed": [20, 20, 20, 60, 60, 65, 70, 80],
        "projectileLowSpeedTimeMs": 250,
        "projectileName": "RocketProjectile",
        "projectileAoe": true,
        "projectileIgnoresCollisions": true,
        "projectileAoeRadius": [150, 150, 150, 200, 200, 200, 250, 250],
        "projectileCollisionRadius": [10, 10, 10, 10, 10, 10, 10, 10],
        "projectileMaxRange": [1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000],
        "projectileAbleToHome": true,
        "limitStatic": false,
        "limitPerMember": 6,
        "hotkey": 7,
        "description": "Shoots homing rockets that deal splash damage.",
        "tiers": 8,
        "gameModes": ["standard", "scarcity"]
    },
    "MageTower": {
        "name": "MageTower",
        "class": "MageTower",
        "woodCosts": [15, 25, 40, 50, 70, 100, 300, 800],
        "stoneCosts": [15, 25, 40, 50, 70, 100, 300, 800],
        "goldCosts": [0, 100, 200, 600, 1200, 2000, 8000, 35000],
        "tokensCosts": [0, 0, 0, 0, 0, 0, 0, 0],
        "towerRadius": [300, 300, 300, 300, 300, 300, 300, 300],
        "msBetweenFires": [800, 800, 700, 600, 500, 400, 300, 200],
        "height": 95.99,
        "gridHeight": 2,
        "width": 95.99,
        "gridWidth": 2,
        "health": [150, 200, 400, 800, 1200, 1600, 2200, 3600],
        "msBeforeRegen": [10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000],
        "healthRegenPerSecond": [20, 25, 30, 40, 80, 80, 110, 150],
        "damageToZombies": [10, 20, 40, 50, 70, 80, 120, 160],
        "damageToPlayers": [2, 2, 2, 2, 2, 3, 3, 3],
        "damageToPets": [5, 5, 5, 5, 5, 5, 5, 5],
        "damageToNeutrals": [250, 350, 450, 550, 650, 750, 850, 1000],
        "projectileLifetime": [500, 500, 500, 500, 500, 500, 500, 500],
        "projectileSpeed": [55, 55, 55, 55, 55, 55, 55, 55],
        "projectileName": "FireballProjectile",
        "projectileAoe": [true, true, true, true, true, true, true, true],
        "projectileAoeRadius": [100, 100, 100, 100, 100, 100, 100, 100],
        "projectileCollisionRadius": [10, 10, 10, 10, 10, 10, 10, 10],
        "projectileEntityKnockback": [2, 2, 3, 4, 5, 6, 7, 8],
        "projectileAbleToHome": [false, false, false, false, false, false, false, false],
        "projectileCount": [3, 3, 3, 3, 3, 3, 3, 3],
        "projectileAngleDifference": [15, 15, 15, 15, 15, 15, 15, 15],
        "limitStatic": false,
        "limitPerMember": 6,
        "hotkey": 8,
        "description": "Fast shooting, low damage, but a whole three projectiles?!",
        "tiers": 8,
        "gameModes": ["standard", "scarcity"]
    },
    "Drill": {
        "name": "Drill",
        "class": "Drill",
        "woodCosts": [5, 15, 25, 35, 45, 55, 700, 1600],
        "stoneCosts": [5, 15, 25, 35, 45, 55, 700, 1600],
        "goldCosts": [0, 200, 300, 600, 800, 1200, 8000, 30000],
        "tokensCosts": [0, 0, 0, 0, 0, 0, 0, 0],
        "width": 95.99,
        "gridWidth": 2,
        "height": 95.99,
        "gridHeight": 2,
        "health": [150, 250, 350, 500, 800, 1400, 1800, 2800],
        "goldPerSecond": [10, 12, 14, 15, 18, 24, 45, 75],
        "msBeforeRegen": [10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000],
        "healthRegenPerSecond": [5, 7, 12, 17, 25, 40, 70, 120],
        "limitStatic": true,
        "limitPerMember": 8,
        "hotkey": 9,
        "description": "These drills produce gold over time.",
        "tiers": 8,
        "gameModes": ["standard"]
    },
    "Harvester": {
        "name": "Harvester",
        "class": "Harvester",
        "goldCosts": [0, 100, 200, 600, 1200, 2000, 8000, 10000],
        "woodCosts": [5, 25, 30, 40, 50, 70, 300, 600],
        "stoneCosts": [5, 20, 30, 40, 60, 80, 300, 600],
        "tokensCosts": [0, 0, 0, 0, 0, 0, 0, 0],
        "height": 143.99,
        "gridHeight": 3,
        "width": 95.99,
        "gridWidth": 2,
        "health": [150, 200, 400, 800, 1200, 1600, 2200, 2800],
        "msBeforeRegen": [10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000],
        "healthRegenPerSecond": [2, 5, 10, 20, 40, 80, 110, 130],
        "harvestAmount": [2.5, 4.65, 4.55, 7.2, 8.25, 10, 13.5, 16],
        "harvestMax": [400, 800, 1200, 1600, 2000, 2400, 2800, 3600],
        "harvestRange": [600, 600, 600, 600, 600, 700, 800, 800],
        "depositCostPerMinute": [200, 300, 350, 500, 600, 700, 1200, 1400],
        "depositMax": [800, 1200, 1400, 2000, 2400, 2800, 4800, 6000],
        "droneSpawnFrequency": [3000, 3000, 3000, 3000, 2500, 2500, 2500, 1500],
        "droneHealth": [200, 400, 400, 600, 600, 800, 800, 1000],
        "droneRadius": [10, 10, 10, 10, 10, 10, 10, 10],
        "droneVelocity": [12, 12, 12, 12, 12, 12, 12, 12],
        "droneCollectRange": [192, 192, 192, 192, 192, 192, 192, 192],
        "droneChargeFrequency": [5000, 5000, 4000, 4000, 3000, 2500, 2500, 2000],
        "droneCollectRate": [4, 6, 6, 8, 15, 20, 24, 30],
        "droneMaxResources": [20, 30, 30, 40, 80, 100, 120, 150],
        "droneHealthRegenPercentPerSecond": 0.1,
        "droneMsBeforeHealthRegen": 5000,
        "resourcePickupDurationMs": 10000,
        "resourcePickupPlayerPickupRange": 144,
        "maxDrones": [3, 3, 5, 5, 5, 5, 5, 5],
        "droneGoldCosts": 5000,
        "limitStatic": false,
        "limitPerMember": 2,
        "hotkey": 0,
        "description": "This LZ spawns drones to collect resources for you!",
        "tiers": 8,
        "gameModes": ["standard", "scarcity"]
    },
    "Factory": {
        "name": "Factory",
        "class": "Factory",
        "woodCosts": [0, 0, 0, 0, 0, 0, 0, 0],
        "stoneCosts": [0, 0, 0, 0, 0, 0, 0, 0],
        "goldCosts": [0, 5000, 10000, 16000, 20000, 32000, 100000, 400000],
        "tokensCosts": [0, 0, 0, 0, 0, 0, 0, 0],
        "width": 95.99,
        "gridWidth": 2,
        "height": 95.99,
        "gridHeight": 2,
        "health": [1500, 1800, 2800, 3000, 5000, 8000, 12000, 20000],
        "msBeforeRegen": [10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000],
        "healthRegenPerSecond": [50, 60, 70, 90, 110, 150, 400, 700],
        "zombieSpawnRadius": 1000,
        "zombieSpawnRadiusMax": 1200,
        "limitStatic": true,
        "limitPerMember": 1,
        "description": "This is what you're here to defend. Make sure it doesn't fall.",
        "tiers": 8,
        "gameModes": ["standard", "scarcity"]
    }
}

// Collect data for only the players
let playerBuildingInfo = null;

const buildingResultCache = {};

exports.getBuilding = (server, name, tier = 1) => {
    if (buildingResultCache[name]?.[tier] !== undefined) return buildingResultCache[name][tier];

    if (name == "*") return buildingInfo;

    if (name == "*Players") {
        if (playerBuildingInfo == null) {
            playerBuildingInfo = {};

            for (const tower in buildingInfo) {
                if (!buildingInfo[tower].gameModes.includes(server.gameMode)) continue;

                playerBuildingInfo[tower] = {};
                for (const prop in buildingInfo[tower]) {
                    if (![
                        "class",
                        "projectileAoeRadius",
                        "limitPerMember",
                        "limitStatic",
                        "description",
                        "tiers",
                        "health",
                        "maxHealth",
                        "gridHeight",
                        "gridWidth",
                        "towerRadius",
                        "range",
                        "goldPerSecond",
                        "harvestRange",
                        "msBetweenFires",
                        "projectileSpeed",
                        "damageToZombies",
                        "attackTargetLimit",
                        "maxYawDeviation",
                        "hotkey",
                        "name",
                        "woodCosts",
                        "stoneCosts",
                        "goldCosts",
                        "tokenCosts",
                        "maxDrones",
                        "droneGoldCosts"
                    ].includes(prop)) continue;
                    playerBuildingInfo[tower][prop] = buildingInfo[tower][prop];
                }
            }

            return playerBuildingInfo;
        } else {
            return playerBuildingInfo;
        }
    }

    const building = buildingInfo[name];
    if (!building) return;
    let obj = {};
    for (let i in building) {
        if (Array.isArray(building[i])) {
            if (i == "gameModes") obj[i] = building[i];
            else obj[i] = building[i][tier - 1];
        } else obj[i] = building[i];
    }

    buildingResultCache[name] ||= {};
    buildingResultCache[name][tier] = obj;

    return obj;
}

exports.getBuildingProp = (name, prop = "*") => {
    const building = buildingInfo[name];
    if (!building) return;
    if (prop == "*") return building;
    return building[prop];
}